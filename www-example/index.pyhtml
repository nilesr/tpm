<!doctype html>
<html>
	<head>
		<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
		<title>TPM Package Database</title>
		<style>
			th {padding: 0px 5px;}
			td {padding: 0px 4px;}
		</style>
		<script>
			function loadHeader() {
				$( "#header" ).load( "header.html" );
			}
		</script>
	</head>
	<body style="background-color: #E4DDCA;" onload="loadHeader();">
		<div id="header"></div>
		<div style="background-color:#f8f8f8; padding:30px; position:relative; margin-left:auto; margin-right:auto; width:80%" class="container">
			Search: <input>
			<table id="searchTextResults">
				<thead>
					<tr><th>Name</th><th>Version</th><th>Filename</th><th>sha256</th></tr>
				</thead>
				<tbody>
					% for name,versionData in extras['packages'].items(): # TODO
						% for version in versionData:
							<tr>
								<td>${name}</td>
								<td>${version["Version"]}</td>
								<td>
								% if version.get('Filename',"nil") == "nil":
									% for x in extras['packages'][name]:
										% if x["Version"] == version.get("LatestVersion"):
											${x["Filename"]}
											<% tempfilename=x["Filename"]; break %>
										% endif
									% endfor
								% else:
									${version['Filename']}
									<% tempfilename=version['Filename'] %>
								% endif
								<td>${extras['hashes'].get(tempfilename)[0].get("Hash","nil")}</td>
							</tr>
						% endfor
					% endfor
				</tbody>
			</table>
		</div>
	</body>
</html>
